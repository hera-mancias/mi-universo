<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MI UNIVERSO</title>
    <style>
        /* ESTILOS BASE: NEGRO PROFUNDO, ROSA ALGOD√ìN Y BLANCO */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            /* Fondo NEGRO M√çSTICO */
            background: linear-gradient(135deg, #10001a 0%, #000000 100%); 
            color: #ffffff; /* Letras BLANCAS para el fondo oscuro */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-sizing: border-box;
            padding-top: 130px; /* ESPACIO AUMENTADO para el banner de urgencia */
        }

        /* ANIMACIONES COSMICAS */
        @keyframes moonShine {
            0% { text-shadow: 0 0 5px rgba(255, 105, 180, 0.5); transform: scale(1); }
            50% { text-shadow: 0 0 15px rgba(255, 105, 180, 1.0); transform: scale(1.1); }
            100% { text-shadow: 0 0 5px rgba(255, 105, 180, 0.5); transform: scale(1); }
        }
        @keyframes pulseAlert {
            0% { box-shadow: 0 0 0 0 rgba(255, 223, 0, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 223, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 223, 0, 0); }
        }
        @keyframes float { /* Animaci√≥n de flotaci√≥n para los iconos del men√∫ */
            0% { transform: translateY(0px); }
            50% { transform: translateY(-2px); }
            100% { transform: translateY(0px); }
        }
        @keyframes rotateGanesha { /* Animaci√≥n de rotaci√≥n para Ganesha */
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }


        /* CABECERA Y NAVEGACI√ìN */
        .header-container {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            background-color: rgba(26, 26, 26, 0.95); /* Negro semi-transparente para la cabecera */
        }
        .header {
            text-align: center;
            padding: 10px 0;
            color: #ff69b4; /* Rosa Intenso para el t√≠tulo */
            font-size: 1.5em;
            font-weight: bold;
            border-bottom: 1px solid #ffb6c1; /* Rosa m√°s suave */
        }
        
        /* BANNER DE URGENCIA */
        .urgent-alert {
            background-color: #ffd700; /* Dorado para llamar la atenci√≥n */
            color: #1a1a1a;
            padding: 5px 0;
            font-size: 0.9em;
            font-weight: bold;
            animation: pulseAlert 1.5s infinite;
            cursor: pointer;
        }

        /* BARRA DE NAVEGACI√ìN */
        .navbar {
            display: flex;
            justify-content: space-around;
            width: 100%;
            background-color: rgba(26, 26, 26, 0.9); /* Negro semi-transparente para la barra */
            padding: 5px 0;
        }
        .navbar-item {
            text-align: center;
            color: #ffffff; /* Texto de men√∫ en BLANCO */
            cursor: pointer;
            padding: 10px 10px;
            font-size: 0.8em; 
            transition: color 0.3s;
        }
        .navbar-item.active {
            color: #ff69b4; /* Pesta√±a activa en Rosa Intenso */
            border-bottom: 2px solid #ff69b4;
        }
        .navbar-item span { /* ANIMACI√ìN PARA LOS ICONOS DEL MEN√ö (NUEVO) */
            display: block;
            font-size: 1.2em;
            margin-bottom: 3px;
            animation: float 3s infinite alternate;
        }

        /* CONTENIDO PRINCIPAL */
        .content {
            padding: 20px; 
            display: none;
            width: 100%;
            max-width: 450px;
            position: relative; 
            z-index: 2;
            background-color: rgba(0, 0, 0, 0.5); /* Fondo oscuro semi-transparente para el contenido principal */
            border-radius: 10px;
            color: white;
        }
        .content.active {
            display: block;
        }

        h2 {
            color: #ff69b4; /* Rosa Intenso */
            border-bottom: 2px solid #ffb6c1;
            padding-bottom: 10px;
            margin-bottom: 25px;
            font-size: 1.6em;
            text-align: center;
        }

        /* ESTILO FASE LUNAR (DESTACADO) */
        .fase-lunar-box {
            padding: 20px;
            border: 2px solid #ffb6c1; /* Rosa Algod√≥n */
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0.9); /* Fondo Blanco (efecto nube) */
            margin-bottom: 20px;
            text-align: center;
            color: #1a1a1a; /* Texto oscuro en la caja clara */
        }
        .moon-symbol {
            font-size: 2.5em;
            color: #ff69b4; /* S√≠mbolo en Rosa Intenso */
            display: block;
            margin-bottom: 5px;
            animation: moonShine 4s infinite ease-in-out; 
        }
        .info {
            color: #ff69b4; /* Rosa Intenso */
            font-weight: bold;
        }
        .influence-detail {
            font-size: 0.9em;
            margin-top: 5px;
            color: #555;
        }
        
        /* ESTILO HOR√ìSCOPO GRATIS */
        #horoscopo-gratis-section {
            background-color: rgba(255, 255, 255, 0.9); /* Fondo Blanco (efecto nube) */
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            color: #1a1a1a;
        }
        #horoscopo-gratis-section input {
             width: 90%;
             padding: 10px;
             margin: 5px 0;
             border: 1px solid #ffb6c1;
             border-radius: 5px;
             box-sizing: border-box;
             color: #1a1a1a; /* Texto de input negro */
             background-color: #f0f0f0;
        }
        #horoscopo-resultado {
            margin-top: 15px;
            padding: 10px;
            border-top: 1px dashed #ff69b4;
            display: none; /* Oculto inicialmente */
        }
        .loading-text {
            color: #ff69b4;
            font-size: 0.9em;
            margin-top: 10px;
        }
        
        /* ESTILO CALENDARIO VISUAL */
        .calendar-container {
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            color: #1a1a1a;
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            color: #1a1a1a;
        }
        .calendar-header h3 {
            margin: 0;
            color: #ff69b4;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            font-size: 0.8em;
            text-align: center;
        }
        .day-name {
            font-weight: bold;
            color: #555;
        }
        .day-number {
            padding: 5px;
            border-radius: 4px;
            background-color: #f0f0f0;
            cursor: pointer;
        }
        .current-day {
            background-color: #ff69b4; /* D√≠a actual en Rosa Intenso */
            color: white;
            font-weight: bold;
        }


        /* GRUPO DE BOTONES NUBE */
        .button-group {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap; /* Permite que los botones bajen si no caben */
            gap: 10px;
            margin-bottom: 20px;
        }

        /* BOTONES DE ACCI√ìN EN FORMA DE NUBE */
        .action-button {
            flex-grow: 1; /* Permite que el bot√≥n crezca para ocupar espacio */
            padding: 12px 10px;
            background-color: #ffb6c1; /* Rosa Algod√≥n */
            color: #000000; /* Texto Negro para contraste */
            border: none;
            border-radius: 25px; /* ¬°Forma de Nube/Pastilla! */
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            margin: 0; /* Elimina m√°rgenes extra */
            width: auto; /* Ancho autom√°tico, no 90% */
            min-width: 45%; /* Asegura que al menos quepan dos por l√≠nea */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            font-size: 0.9em;
        }
        .action-button.tarot {
            background-color: #ffd700; /* Dorado Suave para el Tarot (PAGO) */
            color: #000000;
        }
        .action-button:hover {
            background-color: #ff69b4; /* Rosa m√°s intenso al pasar el rat√≥n */
            color: white;
        }
        .action-button.astrology {
            background-color: #d1b6ff; /* Morado/Lila Suave para Astrolog√≠a */
        }


        /* ESTILO ESPEC√çFICO DE AFIRMACIONES */
        .afirmacion-box {
            background-color: #fff0f5; /* Rosa muy suave */
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            border: 2px solid #ffb6c1;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.2);
            color: #1a1a1a;
        }
        .afirmacion-text {
            font-size: 1.2em;
            font-weight: bold;
            color: #000000;
            margin-bottom: 15px;
            min-height: 50px;
        }
        .afirmacion-figure {
            margin: 10px auto;
            max-width: 100px;
            height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 4em;
            border-radius: 50%;
            border: 3px solid;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            animation: rotateGanesha 10s infinite linear;
        }
        #afirmacion-paywall-button {
            width: 100%;
            margin-top: 15px;
            display: none;
        }


        /* MODALES */
        .modal {
            display: none;
            position: fixed;
            z-index: 20;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            padding-top: 60px;
        }
        .modal-content {
            background-color: #ffffff;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #ffb6c1;
            width: 80%;
            max-width: 350px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(255, 105, 180, 0.4);
            color: #333;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover, .close:focus {
            color: #ff69b4;
            text-decoration: none;
            cursor: pointer;
        }
        .modal-content input, .modal-content textarea {
            width: 90%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ffb6c1;
            background-color: #fff;
            color: #333;
            border-radius: 5px;
            box-sizing: border-box;
            resize: vertical;
        }

        /* Estilo de los servicios (Botones de pago) */
        .service-box {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: #fff0f5;
            text-align: center;
            color: #333;
        }
        .service-box .price {
            font-size: 1.4em;
            color: #ff69b4;
            font-weight: bold;
            display: block;
            margin: 5px 0;
        }
        .service-box button {
            background-color: #ffd700;
            color: #000000;
        }

        /* Estilo para mostrar la carta revelada */
        #tarotResultado {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #ffb6c1;
            border-radius: 8px;
            background-color: #ffffff;
            text-align: center;
        }
        #tarotResultado h4 {
            color: #ff69b4;
            margin: 0 0 10px 0;
        }
        #tarotResultado p {
            color: #333;
            font-size: 0.9em;
        }

        /* ESTILO ESPEC√çFICO DE TU ESPACIO (Servicios) */
        .service-item-box {
            background-color: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            color: #1a1a1a;
            text-align: left;
        }
        .service-item-box h4 {
            color: #ff69b4;
            margin: 0 0 5px 0;
            font-size: 1.1em;
        }
        .service-item-box .description {
            font-size: 0.9em;
            color: #555;
            margin-bottom: 10px;
        }
        .service-item-box .price-tag {
            font-size: 1.2em;
            font-weight: bold;
            color: #000000;
            display: inline-block;
            margin-right: 15px;
        }
        
        /* ESTILO DE BOTONES DE REDES SOCIALES */
        .social-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
            font-weight: bold;
            text-decoration: none;
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s;
            font-size: 1em;
        }
        .social-button:hover {
            transform: translateY(-2px);
        }
        .whatsapp-button {
            background-color: #25d366;
        }
        .tiktok-button {
            background-color: #000000;
        }
        .email-button {
            background-color: #ff69b4;
        }
        .social-icon {
            font-size: 1.4em;
            margin-right: 10px;
        }


    </style>
</head>
<body>

    <!-- CABECERA Y NAVEGACI√ìN -->
    <div class="header-container">
        <div class="urgent-alert" onclick="openUrgentReadingModal()">
            LECTURA URGENTE EN 30 MINUTOS 50‚Ç¨ | ¬°TOCA AQU√ç!
        </div>
        <div class="header">
            MI UNIVERSO
        </div>
        <div class="navbar" id="navbar">
            <!-- Pesta√±as se a√±adir√°n din√°micamente aqu√≠ -->
        </div>
    </div>

    <!-- PESTA√ëA 1: CALENDARIO -->
    <div id="calendario" class="content active">
        <h2>‚ú® CALENDARIO C√ìSMICO ‚ú®</h2>
        
        <div class="fase-lunar-box">
            <span id="moonSymbol" class="moon-symbol"></span>
            <p style="font-size: 1.3em;">Fase Lunar Hoy: <span id="faseLunarActual" class="info"></span></p>
            <p style="font-size: 0.9em;">D√≠a, Mes y Hora Exacta: <span id="fechaActual" class="info"></span></p>
            
            <hr style="border: 0; height: 1px; background-color: #ffb6c1; margin: 15px 0;">

            <p style="font-size: 1.1em; font-weight: bold;">üåå Influencia Astrol√≥gica del D√≠a üåå</p>
            <p id="influenciaPlanetaria" class="influence-detail">Planeta Regente: </p>
            <p id="influenciaColor" class="influence-detail">Color de Poder: </p>
            <p id="influenciaMensaje" class="influence-detail">Mensaje M√≠stico: </p>

            <p id="astrologyLoading" class="loading-text" style="display: none;">Generando predicci√≥n...</p>
            <button class="action-button astrology" onclick="obtenerInfluenciaDiaria(this)">
                ACTUALIZAR INFLUENCIA C√ìSMICA
            </button>
        </div>

        <!-- PREDICCI√ìN HOR√ìSCOPO DIARIA GRATIS -->
        <div id="horoscopo-gratis-section">
            <h3 style="color: #ff69b4; margin-bottom: 10px;">PREDICCI√ìN HOR√ìSCOPO DIARIA (GRATIS)</h3>
            <p style="font-size: 0.8em; color: #666; margin-bottom: 10px;">Introduce tu nombre y fecha para ver la predicci√≥n correcta:</p>
            
            <input type="text" id="nombreHoroscopo" placeholder="Tu Nombre">
            <input type="date" id="fechaHoroscopo" placeholder="Fecha de Nacimiento">
            
            <button class="action-button" onclick="obtenerHoroscopoGratis()">VER MI HOR√ìSCOPO DE HOY</button>

            <div id="horoscopo-resultado" style="margin-top: 15px; display: none;">
                <p style="font-weight: bold;">Tu Signo: <span id="signoResult"></span></p>
                <p id="prediccionResult"></p>
                <p style="font-size: 0.8em; color: #ff69b4;">*Para la predicci√≥n completa de 12 signos, visita la pesta√±a SERVICIOS.</p>
            </div>
            <p id="horoscopoLoading" class="loading-text" style="display: none;">Calculando tu destino...</p>
        </div>


        <!-- CALENDARIO VISUAL -->
        <div class="calendar-container">
            <div class="calendar-header">
                <button onclick="changeMonth(-1)">&#9664;</button>
                <h3 id="currentMonthYear"></h3>
                <button onclick="changeMonth(1)">&#9654;</button>
            </div>
            <div id="calendarGrid" class="calendar-grid">
                <!-- D√≠as de la semana y n√∫meros se insertan con JS -->
            </div>
        </div>

        <!-- GRUPO DE BOTONES NUBE -->
        <div class="button-group">
            <button class="action-button" onclick="openDreamModal()">
                SO√ëADOR (A√±adir Sue√±os)
            </button>

            <button class="action-button tarot" onclick="openTarotModal()">
                TAROT: 2 CARTAS (Gu√≠a Gratis + Pago)
            </button>
        </div>
        <p style="text-align: center; color: #666;">*Se requiere pago para la lectura completa de Tarot.</p>
        
    </div>

    <!-- PESTA√ëA 2: AFIRMACIONES -->
    <div id="afirmaciones" class="content">
        <h2 style="margin-bottom: 20px;">‚ú® AFIRMACIONES DIARIAS ‚ú®</h2>
        
        <!-- Contenedor para la carta revelada -->
        <div id="cardContainer" class="afirmacion-box" style="min-height: 250px;">
            <p style="font-weight: bold; color: #ff69b4;">Toca el bot√≥n para recibir tu mensaje.</p>
            <p style="font-size: 0.9em; color: #666;">Afirmaciones positivas y gu√≠a visual de los Susurros del Dios Ganesha.</p>
        </div>
        
        <button id="sacarCartaBtn" class="action-button" style="width: 100%; margin-top: 20px;" onclick="sacarCartaAfirmacion(this)">
            SACAR CARTA DE AFIRMACI√ìN
        </button>
        
        <!-- MURO DE PAGO Y SUSCRIPCI√ìN (Se muestra DESPU√âS de la carta gratuita) -->
        <div id="afirmacionPaywall" style="display: none;">
            <h3 style="color: #ff69b4; text-align: center; border-bottom: none; margin-top: 30px;">SUSCRIPCI√ìN DE AFIRMACIONES</h3>
            <div class="service-box">
                <p style="font-size: 1.1em; font-weight: bold;">Recibe Afirmaci√≥n Diaria en tu Correo</p>
                <span class="price">0.99‚Ç¨ / mes</span>
                <p style="font-size: 0.8em; color: #666;">*Se requiere tu conexi√≥n personal (email) para activar la suscripci√≥n y el env√≠o diario.</p>
                <button class="action-button tarot" onclick="openModal('accessModal', 'AFIRMACIONES_MENSUAL_099')">
                    SUSCRIBIRSE POR 0.99‚Ç¨/MES
                </button>
            </div>
        </div>
        
        <h3 style="color: #ff69b4; text-align: center; border-bottom: none; margin-top: 30px;">MENSAJES DE ALMA GEMELA (SUSCRIPCI√ìN)</h3>
        <div class="button-group" style="margin-top: 15px;">
            <!-- DIARIA (3‚Ç¨) -->
            <div class="service-item-box" style="width: 45%; color: white; background-color: #4a007a;">
                <h4 style="color: white;">Mensaje DIARIO (1 al d√≠a)</h4>
                <div class="description" style="color: #ffb6c1;">Gu√≠a diaria y predictiva de tu Alma Gemela.</div>
                <span class="price-tag" style="color: #ffd700;">3.00‚Ç¨</span>
                <button class="action-button tarot" onclick="openModal('accessModal', 'ALMA_GEMELA_DIARIA_3')">PAGAR 3.00‚Ç¨</button>
            </div>
            <!-- SEMANAL (5.99‚Ç¨) -->
            <div class="service-item-box" style="width: 45%; color: white; background-color: #4a007a;">
                <h4 style="color: white;">Mensaje SEMANAL (1 a la semana)</h4>
                <div class="description" style="color: #ffb6c1;">Predicci√≥n semanal para la conexi√≥n de tu Alma Gemela.</div>
                <span class="price-tag" style="color: #ffd700;">5.99‚Ç¨</span>
                <button class="action-button tarot" onclick="openModal('accessModal', 'ALMA_GEMELA_SEMANAL_599')">PAGAR 5.99‚Ç¨</button>
            </div>
        </div>

        <h3 style="color: #ff69b4; text-align: center; border-bottom: none; margin-top: 30px;">PREDICCIONES ADICIONALES</h3>
        <div class="button-group" style="margin-top: 15px;">
            <div class="service-item-box" style="width: 45%;">
                <h4 style="color: #ff69b4;">Suscripci√≥n: Semanal</h4>
                <div class="description">Hor√≥scopo expandido y Carta Astral.</div>
                <span class="price-tag">3.29‚Ç¨</span>
                <button class="action-button tarot" onclick="openModal('accessModal', 'PREDICCION_SEMANAL_329')">PAGAR 3.29‚Ç¨</button>
            </div>
            <div class="service-item-box" style="width: 45%;">
                <h4 style="color: #ff69b4;">Suscripci√≥n: Por Vida</h4>
                <div class="description">Acceso de por vida a predicciones y recordatorios.</div>
                <span class="price-tag">32.99‚Ç¨</span>
                <button class="action-button tarot" onclick="openModal('accessModal', 'PREDICCION_POR_VIDA_3299')">PAGAR 32.99‚Ç¨</button>
            </div>
        </div>
    </div>
    
    <!-- PESTA√ëA 3: TU ESPACIO (LECTURAS Y RITUALES) -->
    <div id="tu_espacio" class="content">
        <h2>TU ESPACIO Y OFERTAS ESPECIALES</h2>
        
        <!-- CARPETA 1: LECTURAS R√ÅPIDAS Y TAROT -->
        <h3 style="color: #ff69b4; text-align: center; border-bottom: none; margin-top: 30px;">üÉè LECTURAS R√ÅPIDAS Y TAROT</h3>
        <div class="button-group" style="margin-top: 15px;">
            
             <!-- 1. CARTA S√ç O NO (1‚Ç¨) -->
            <div class="service-item-box">
                <h4>1 Carta S√ç o NO</h4>
                <div class="description">Respuesta inmediata a una pregunta espec√≠fica.</div>
                <div class="price-tag">1‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'LECTURA_SI_NO_1')">PAGAR 1‚Ç¨</button>
            </div>
            
            <!-- 2. LECTURA 3 CARTAS (5‚Ç¨) -->
            <div class="service-item-box">
                <h4>3 Cartas + 1 Pregunta</h4>
                <div class="description">Lectura enfocada en el presente, pasado o futuro.</div>
                <div class="price-tag">5‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'LECTURA_3_CARTAS_5')">PAGAR 5‚Ç¨</button>
            </div>
            
            <!-- 3. LECTURA 3 CARTAS + ACTIVACI√ìN ANG√âLICAL (7‚Ç¨) -->
            <div class="service-item-box">
                <h4>3 Cartas + Act. Ang√©lical</h4>
                <div class="description">Gu√≠a de 3 cartas con un mensaje de alta vibraci√≥n de tus √°ngeles.</div>
                <div class="price-tag">7‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'LECTURA_3_ANGELICAL_7')">PAGAR 7‚Ç¨</button>
            </div>

            <!-- 4. TIRADA GENERAL (11‚Ç¨) -->
            <div class="service-item-box">
                <h4>Tirada General</h4>
                <div class="description">Visi√≥n completa de tu energ√≠a actual y retos a superar.</div>
                <div class="price-tag">11‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'TIRADA_GENERAL_11')">PAGAR 11‚Ç¨</button>
            </div>
            
            <!-- 5. LECTURA GENERAL + ACTIVACI√ìN ANG√âLICAL (13‚Ç¨) -->
            <div class="service-item-box">
                <h4>General + Act. Ang√©lical</h4>
                <div class="description">Lectura profunda combinada con una activaci√≥n energ√©tica.</div>
                <div class="price-tag">13‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'LECTURA_GENERAL_ANGELICAL_13')">PAGAR 13‚Ç¨</button>
            </div>
        </div>

        <!-- CARPETA 2: RITUALES DE MAGIA -->
        <h3 style="color: #ff69b4; text-align: center; border-bottom: none; margin-top: 30px;">üåô RITUALES DE MAGIA</h3>
        <div class="button-group" style="margin-top: 15px;">
             <!-- Ritual de Limpieza Espiritual -->
            <div class="service-item-box">
                <h4>Ritual de Limpieza</h4>
                <div class="description">Ritual profesional para limpiar energ√≠as negativas.</div>
                <div class="price-tag">25‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'RITUAL_LIMPIEZA_25')">PAGAR 25‚Ç¨</button>
            </div>
             <!-- Ritual de Amor -->
            <div class="service-item-box">
                <h4>Ritual de Amor</h4>
                <div class="description">Ritual para atraer el amor a tu vida.</div>
                <div class="price-tag">35‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'RITUAL_AMOR_35')">PAGAR 35‚Ç¨</button>
            </div>
            <!-- Ritual de Econom√≠a -->
            <div class="service-item-box">
                <h4>Ritual de Econom√≠a</h4>
                <div class="description">Ritual para mejorar la econom√≠a y atraer abundancia.</div>
                <div class="price-tag">70‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'RITUAL_ECONOMIA_70')">PAGAR 70‚Ç¨</button>
            </div>
            <!-- Ritual de Salud -->
            <div class="service-item-box">
                <h4>Ritual de Salud</h4>
                <div class="description">Ritual para mejorar la salud.</div>
                <div class="price-tag">90‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'RITUAL_SALUD_90')">PAGAR 90‚Ç¨</button>
            </div>
             <!-- Ritual Amansamiento -->
            <div class="service-item-box">
                <h4>Ritual Amansamiento</h4>
                <div class="description">Ritual de amansamiento.</div>
                <div class="price-tag">120‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'RITUAL_AMANSAMIENTO_120')">PAGAR 120‚Ç¨</button>
            </div>
             <!-- Ritual de Separaci√≥n -->
            <div class="service-item-box">
                <h4>Ritual de Separaci√≥n</h4>
                <div class="description">Ritual para causar una separaci√≥n.</div>
                <div class="price-tag">150‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'RITUAL_SEPARACION_150')">PAGAR 150‚Ç¨</button>
            </div>
             <!-- Ritual Santa Muerte -->
            <div class="service-item-box">
                <h4>Ritual Santa Muerte</h4>
                <div class="description">Ritual con Santa Muerte.</div>
                <div class="price-tag">150‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'RITUAL_SANTA_MUERTE_150')">PAGAR 150‚Ç¨</button>
            </div>
             <!-- Mu√±eco Manipulaci√≥n -->
            <div class="service-item-box">
                <h4>Mu√±eco Manipulaci√≥n</h4>
                <div class="description">Ritual con mu√±eco de manipulaci√≥n.</div>
                <div class="price-tag">170‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'MUNECO_MANIPULACION_170')">PAGAR 170‚Ç¨</button>
            </div>
        </div>

        <!-- CARPETA 3: OFERTAS Y TALLERES AVANZADOS -->
        <h3 style="color: #ff69b4; text-align: center; border-bottom: none; margin-top: 30px;">üéì TALLERES Y OFERTAS AVANZADAS</h3>
        <div class="button-group" style="margin-top: 15px;">
             <!-- Retrato de Alma Gemela -->
            <div class="service-item-box">
                <h4>Retrato de Alma Gemela</h4>
                <div class="description">Lectura profunda e ilustraci√≥n espiritual.</div>
                <div class="price-tag">50‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'RETRATO_ALMA_GEMELA_50')">PAGAR 50‚Ç¨</button>
            </div>
             <!-- Lectura Personal y Directa -->
            <div class="service-item-box">
                <h4>Lectura Personal y Directa</h4>
                <div class="description">Sesi√≥n 1 a 1 para gu√≠a completa.</div>
                <div class="price-tag">50‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'LECTURA_PERSONAL_50')">PAGAR 50‚Ç¨</button>
            </div>
             <!-- Taller Almas Llama Gemelas -->
            <div class="service-item-box">
                <h4>Taller Almas Llama Gemelas</h4>
                <div class="description">Curso completo sobre la conexi√≥n de almas.</div>
                <div class="price-tag">60‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'TALLER_LLAMAS_60')">PAGAR 60‚Ç¨</button>
            </div>
             <!-- Taller Tarot 111 -->
            <div class="service-item-box">
                <h4>Taller Tarot 111</h4>
                <div class="description">Formaci√≥n avanzada en tarot.</div>
                <div class="price-tag">111‚Ç¨</div>
                <button class="action-button tarot" onclick="openModal('accessModal', 'TALLER_TAROT_111')">PAGAR 111‚Ç¨</button>
            </div>
             <!-- Oferta de Ritual + Afirmaciones -->
            <div class="service-item-box">
                <h4>Ritual + Afirmaciones (Oferta)</h4>
                <div class="description">Ritual de Limpieza + 1 Mes Afirmaciones.</div>
                <span class="price-tag">42‚Ç¨</span>
                <button class="action-button tarot" onclick="openModal('accessModal', 'OFERTA_LIMPIEZA_42')">PAGAR 42‚Ç¨</button>
            </div>
             <!-- Afirmaciones Diarias (Est√°ndar) -->
            <div class="service-item-box">
                <h4>Afirmaciones Diarias (Est√°ndar)</h4>
                <div class="description">Suscripci√≥n mensual de Afirmaciones.</div>
                <span class="price-tag">15.99‚Ç¨</span>
                <button class="action-button tarot" onclick="openModal('accessModal', 'AFIRMACIONES_ESTANDAR_1599')">PAGAR 15.99‚Ç¨</button>
            </div>
        </div>

    </div>

    <!-- PESTA√ëA 4: CONTACTO -->
    <div id="contacto" class="content">
        <h2>CONTACTO DIRECTO</h2>
        
        <h3 style="color: #ff69b4; text-align: center; border-bottom: none; margin-top: 30px;">PAGOS Y COMPROBANTES</h3>
        
        <div class="service-item-box">
            <h4>1. Confirma tu Pago (WhatsApp)</h4>
            <div class="description">Haz clic aqu√≠ para enviar el comprobante de pago de cualquier servicio.</div>
            <a href="https://wa.me/34666636723?text=Hola%2C%20soy%20%5BNombre%5D%20y%20acabo%20de%20realizar%20un%20pago%20por%20un%20servicio." class="social-button whatsapp-button">
                <span class="social-icon">üí¨</span> ENVIAR COMPROBANTE AHORA
            </a>
        </div>
        
        <!-- LECTURA URGENTE EN 30 MINUTOS (Bot√≥n debajo de la confirmaci√≥n) -->
        <div class="service-item-box" style="border: 2px solid #ffd700;">
            <h4>üåü LECTURA URGENTE (30 MINUTOS)</h4>
            <div class="description">Gu√≠a inmediata. ¬°Servicio Prioritario!</div>
            <span class="price-tag" style="color: #ffd700;">50‚Ç¨</span>
            <button class="action-button tarot" onclick="openModal('accessModal', 'LECTURA_URGENTE_50')">PAGAR Y SOLICITAR URGENCIA</button>
        </div>


        <div class="service-item-box">
            <h4>3. Reserva o Duda R√°pida</h4>
            <div class="description">Agenda tu cita o consulta cualquier duda sobre un ritual o taller.</div>
            <a href="https://wa.me/34666636723?text=Hola%2C%20soy%20%5BNombre%5D%20y%20me%20gustar%C3%ADa%20consultar%20sobre%20un%20servicio." class="social-button whatsapp-button">
                 <span class="social-icon">üìÖ</span> WHATSAPP DIRECTO
            </a>
        </div>
        
        <h3 style="color: #ff69b4; text-align: center; border-bottom: none; margin-top: 30px;">REDES Y DATOS</h3>
        
        <div class="service-item-box">
            <h4>Sigue a TU UNIVERSO</h4>
            <div class="description">Con√©ctate para ver contenido gratuito y sorteos.</div>
            <a href="https://www.tiktok.com/@HERAMANCIAS" target="_blank" class="social-button tiktok-button">
                <span class="social-icon">üéµ</span> TIKTOK (@HERAMANCIAS)
            </a>
        </div>

        <div class="service-item-box">
            <h4>Contacto General</h4>
            <div class="description">Para consultas administrativas o soporte.</div>
            <a href="mailto:NUMENBLANCO@GMAIL.COM" class="social-button email-button">
                <span class="social-icon">üìß</span> NUMENBLANCO@GMAIL.COM
            </a>
        </div>
    </div>


    <!-- MODALES Y SCRIPTS -->
    <div id="accessModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('accessModal')">&times;</span>
            <h2 style="text-align: center;">Acceso a Suscripci√≥n</h2>
            <p style="color: #666; text-align: center;">¬°Gracias! Antes de pagar, necesitamos tus datos para activar el servicio:</p>
            
            <input type="text" id="modalNombre" placeholder="Tu Nombre">
            <input type="date" id="modalFechaNacimiento" placeholder="Fecha de Nacimiento">
            <input type="email" id="modalCorreoElectronico" placeholder="Tu Correo Electr√≥nico">
            
            <button onclick="submitModalData()">CONFIRMAR Y PAGAR SERVICIO</button>
            <p id="modalError" style="color: #ff69b4; margin-top: 10px; font-size: 0.9em;"></p>
        </div>
    </div>
    
    <div id="dreamModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('dreamModal')">&times;s</span>
            <h2 style="text-align: center;">üí≠ SO√ëADOR</h2>
            <p style="color: #666; text-align: center; margin-bottom: 10px;">Escribe tu sue√±o y gu√°rdalo. Si quieres interpretaci√≥n, puedes enviarlo.</p>
            
            <textarea id="dreamText" rows="5" placeholder="Copia aqu√≠ el sue√±o que recuerdas..."></textarea>
            
            <button class="action-button" onclick="saveDream()">GUARDAR SUE√ëO (Solo en tu App)</button>
            
            <hr style="border: 0; height: 1px; background-color: #ffb6c1; margin: 15px 0;">

            <p style="color: #ff69b4; text-align: center; font-weight: bold;">¬øQUIERES INTERPRETACI√ìN?</p>
            <p style="color: #666; text-align: center; font-size: 0.9em;">Env√≠a tu sue√±o para ser analizado por nuestra Guardiana. El pago es por voluntad (lo que sientas).</p>
            
            <button class="action-button tarot" onclick="sendDreamForInterpretation()">
                ENVIAR Y PAGAR VOLUNTAD (WhatsApp)
            </button>
        </div>
    </div>

    <div id="tarotModal" class="modal">
        <div class="modal-content" id="tarotModalContent">
            <span class="close" onclick="closeModal('tarotModal')">&times;</span>
            <h2 style="text-align: center;">üÉè Lectura Personal</h2>
            <p style="color: #666; text-align: center;">Introduce tus datos y tu pregunta para recibir tu **Gu√≠a Gratuita** y acceder a la lectura completa de pago.</p>
            
            <input type="text" id="tarotNombre" placeholder="Tu Nombre">
            <input type="date" id="tarotFechaNacimiento" placeholder="Fecha de Nacimiento">
            <input type="email" id="tarotCorreoElectronico" placeholder="Tu Correo Electr√≥nico">
            <textarea id="tarotPregunta" rows="3" placeholder="Escribe aqu√≠ tu pregunta."></textarea>

            <button class="action-button tarot" onclick="processTarotReading()">REVELAR GU√çA GRATUITA</button>
            <p id="tarotModalError" style="color: #ff69b4; margin-top: 10px; font-size: 0.9em;"></p>
        </div>
    </div>


    <script>
        // Configuraci√≥n de la API de Gemini
        const apiKey = ""; 
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
        
        // NOMBRES DE LAS PESTA√ëAS
        const TABS = ["CALENDARIO", "AFIRMACIONES", "TU ESPACIO", "CONTACTO"];
        const TAB_IDS = ["calendario", "afirmaciones", "tu_espacio", "contacto"];
        
        // Lista de Afirmaciones (con URLs de im√°genes de ejemplo)
        const AFIRMACIONES_ORACULO = [
            { img: 'afirmacion_01.jpg', concepto: 'CONFIANZA', color: 'blue', mensaje: 'Ganesha te susurra: Tus habilidades son suficientes para superar cualquier obst√°culo. ¬°Conf√≠a en ti mismo!' },
            { img: 'afirmacion_02.jpg', concepto: 'PACIENCIA', color: 'yellow', mensaje: 'El elefante sagrado te recuerda: Deja que el camino se revele. La prisa es un obst√°culo; la paciencia es una bendici√≥n.' },
            { img: 'afirmacion_03.jpg', concepto: 'PROSPERIDAD', color: 'green', mensaje: 'Ganesha bendice tu abundancia: Un nuevo ciclo de prosperidad est√° comenzando en tu vida financiera.' },
            { img: 'afirmacion_04.jpg', concepto: 'CALMA', color: 'purple', mensaje: 'La sabidur√≠a de Ganesha te gu√≠a: La calma es tu superpoder. No reacciones, observa y act√∫a con paz.' },
            { img: 'afirmacion_05.jpg', concepto: 'AMOR PROPIO', color: 'pink', mensaje: 'Ganesha te dice: El amor que buscas reside en tu propio coraz√≥n. √Åbrete a recibirlo de ti mismo.' },
            { img: 'afirmacion_06.jpg', concepto: 'LIBERACI√ìN', color: 'brown', mensaje: 'El removedor de obst√°culos te libera: Suelta el control. Las cargas que llevas no son tuyas, devu√©lvelas al universo.' },
            { img: 'afirmacion_07.jpg', concepto: 'PROTECCI√ìN', color: 'red', mensaje: 'Ganesha te sonr√≠e: Est√°s protegido. No hay fuerza externa que pueda detener tu camino.' }
        ];

        // Lista de Arcanos para el Tarot Gratuito
        const ARCANOS_MAYORES = [
            { nombre: "El Mago", lectura: "Iniciativa, habilidad y potencial. Tienes el poder de crear." },
            { nombre: "La Sacerdotisa", lectura: "Intuici√≥n, misterio y conocimiento oculto. Escucha tu voz interior." },
            { nombre: "La Emperatriz", lectura: "Abundancia, creatividad y fertilidad. Momento de dar a luz ideas." },
            { nombre: "El Emperador", lectura: "Autoridad, estructura y control. Necesitas orden y disciplina." },
            { nombre: "El Sumo Sacerdote", lectura: "Tradici√≥n, gu√≠a y sabidur√≠a. Busca el consejo de un mentor." },
            { nombre: "Los Enamorados", lectura: "Decisi√≥n, elecci√≥n y uni√≥n. El camino del coraz√≥n es el correcto." },
            { nombre: "El Carro", lectura: "Victoria, determinaci√≥n y avance. Mant√©n el enfoque en la meta." },
            { nombre: "La Justicia", lectura: "Equilibrio, verdad y causa-efecto. Lo justo est√° por manifestarse." },
            { nombre: "El Ermita√±o", lectura: "Introspecci√≥n, soledad y b√∫squeda interior. T√≥mate un tiempo para reflexionar." },
            { nombre: "La Rueda de la Fortuna", lectura: "Cambio de suerte, ciclos y destino. La vida te trae un giro positivo." },
            { nombre: "La Fuerza", lectura: "Coraje, paciencia y dominio de uno mismo. Usa la fuerza interior con suavidad." },
            { nombre: "El Colgado", lectura: "Sacrificio, perspectiva y dejar ir. Debes ver las cosas desde otro √°ngulo." },
            { nombre: "La Muerte", lectura: "Transformaci√≥n, final y nuevo comienzo. Libera lo que ya no sirve." },
            { nombre: "La Templanza", lectura: "Armon√≠a, moderaci√≥n y paciencia. Equilibrio entre extremos." },
            { nombre: "El Diablo", lectura: "Tentaci√≥n, atadura y materialismo. Enfrenta tus miedos." },
            { nombre: "La Torre", lectura: "Destrucci√≥n de viejas estructuras, liberaci√≥n y revelaci√≥n s√∫bita. Un cambio necesario." },
            { nombre: "La Estrella", lectura: "Esperanza, inspiraci√≥n y serenidad. El futuro es brillante." },
            { nombre: "La Luna", lectura: "Ilusi√≥n, intuici√≥n profunda y miedo a lo desconocido. Conf√≠a en tus sue√±os." },
            { nombre: "El Sol", lectura: "Alegr√≠a, √©xito y vitalidad. Per√≠odo de claridad y felicidad." },
            { nombre: "El Juicio", lectura: "Renacimiento, evaluaci√≥n y despertar. Es hora de tomar decisiones importantes." },
            { nombre: "El Mundo", lectura: "Culminaci√≥n, realizaci√≥n e integraci√≥n. Has completado un ciclo importante." },
            { nombre: "El Loco", lectura: "Nuevos comienzos, espontaneidad y fe ciega. Atr√©vete a dar el primer paso." }
        ];

        // Estado global para el calendario
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();


        // --- L√ìGICA DE NAVEGACI√ìN, FASES Y UTILIDADES ---

        function renderNavbar() {
            const navbar = document.getElementById('navbar');
            navbar.innerHTML = '';
            TABS.forEach((name, index) => {
                const id = TAB_IDS[index];
                const item = document.createElement('div');
                item.classList.add('navbar-item');
                const iconMap = { "CALENDARIO": 'üóìÔ∏è', "AFIRMACIONES": 'üíñ', "TU ESPACIO": 'üßò‚Äç‚ôÄÔ∏è', "CONTACTO": 'üí¨' };
                item.innerHTML = `<span>${iconMap[name]}</span>${name}`;
                item.onclick = () => mostrarSeccion(id);
                navbar.appendChild(item);
            });
            mostrarSeccion(TAB_IDS[0]);
        }

        function mostrarSeccion(seccionId) {
            const contenidos = document.querySelectorAll('.content');
            contenidos.forEach(c => c.classList.remove('active'));
            document.getElementById(seccionId).classList.add('active');

            const items = document.querySelectorAll('.navbar-item');
            items.forEach(item => item.classList.remove('active'));
            const index = TAB_IDS.indexOf(seccionId);
            if (index !== -1) {
                document.getElementById('navbar').children[index].classList.add('active');
            }
            
            // L√≥gica espec√≠fica al cambiar de pesta√±a
            if (seccionId === 'afirmaciones') {
                resetAfirmacionCard();
            }
        }

        function getFaseLunar(fechaActual) {
            const referencia = new Date('2000-01-01'); 
            const diffDias = (fechaActual - referencia) / (1000 * 60 * 60 * 24);
            const ciclo = 29.53059;
            const diaCiclo = diffDias % ciclo;
            
            if (diaCiclo <= 1.84 || diaCiclo >= 27.69) return { nombre: 'Luna Nueva', simbolo: 'üåë' };
            if (diaCiclo > 1.84 && diaCiclo <= 5.53) return { nombre: 'Creciente C√≥ncava', simbolo: 'üåí' };
            if (diaCiclo > 5.53 && diaCiclo <= 9.22) return { nombre: 'Cuarto Creciente', simbolo: 'üåì' };
            if (diaCiclo > 9.22 && diaCiclo <= 12.91) return { nombre: 'Gibosa Creciente', simbolo: 'üåî' };
            if (diaCiclo > 12.91 && diaCiclo <= 16.61) return { nombre: 'Luna Llena', simbolo: 'üåï' };
            if (diaCiclo > 16.61 && diaCiclo <= 20.30) return { nombre: 'Gibosa Menguante', simbolo: 'üåñ' };
            if (diaCiclo > 20.30 && diaCiclo <= 23.99) return { nombre: 'Cuarto Menguante', simbolo: 'üåó' };
            if (diaCiclo > 23.99 && diaCiclo <= 27.69) return { nombre: 'Menguante C√≥ncava', simbolo: 'üåò' };
            
            return { nombre: 'Error', simbolo: '‚ùì' };
        }

        function actualizarFaseLunar() {
            const hoy = new Date();
            const fase = getFaseLunar(hoy);
            const opcionesFecha = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false };
            const fechaFormateada = hoy.toLocaleDateString('es-ES', opcionesFecha);

            const moonSymbolElement = document.getElementById('moonSymbol');
            const faseLunarActualElement = document.getElementById('faseLunarActual');
            const fechaActualElement = document.getElementById('fechaActual');
            
            if (moonSymbolElement) moonSymbolElement.textContent = fase.simbolo;
            if (faseLunarActualElement) faseLunarActualElement.textContent = fase.nombre;
            if (fechaActualElement) fechaActualElement.textContent = fechaFormateada;
        }

        async function obtenerInfluenciaDiaria(button) {
            const loadingElement = document.getElementById('astrologyLoading');
            const influenciaPlanetariaElement = document.getElementById('influenciaPlanetaria');
            const influenciaColorElement = document.getElementById('influenciaColor');
            const influenciaMensajeElement = document.getElementById('influenciaMensaje');

            // Limpiar resultados anteriores
            influenciaPlanetariaElement.textContent = 'Planeta Regente:';
            influenciaColorElement.textContent = 'Color de Poder:';
            influenciaMensajeElement.textContent = 'Mensaje M√≠stico:';

            loadingElement.style.display = 'block';
            button.disabled = true;

            const hoy = new Date().toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' });
            const fase = getFaseLunar(new Date()).nombre;

            const systemPrompt = `Eres un astr√≥logo experto. Genera una predicci√≥n astrol√≥gica en JSON conciso para ${hoy}. Incluye el Planeta Regente, el Color que influye y un Mensaje M√≠stico de m√°ximo 15 palabras.`;
            const userQuery = `Dime la influencia astrol√≥gica para hoy, ${hoy}, durante la fase de ${fase}.`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: "OBJECT",
                        properties: {
                            "planetaRegente": { "type": "STRING" },
                            "color": { "type": "STRING" },
                            "mensaje": { "type": "STRING" }
                        }
                    }
                }
            };
            
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) throw new Error(`API error: ${response.statusText}`);
                
                const result = await response.json();
                const jsonText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (!jsonText) throw new Error("Respuesta JSON vac√≠a.");
                
                const data = JSON.parse(jsonText);
                
                influenciaPlanetariaElement.textContent = `Planeta Regente: ${data.planetaRegente}`;
                influenciaColorElement.textContent = `Color de Poder: ${data.color}`;
                influenciaMensajeElement.textContent = `Mensaje M√≠stico: ${data.mensaje}`;

            } catch (error) {
                console.error("Error al obtener la influencia:", error);
                influenciaPlanetariaElement.textContent = 'Planeta Regente: ERROR';
                influenciaMensajeElement.textContent = 'Mensaje M√≠stico: No se pudo generar la predicci√≥n.';
            } finally {
                loadingElement.style.display = 'none';
                button.disabled = false;
            }
        }

        async function obtenerHoroscopoGratis() {
            const nombre = document.getElementById('nombreHoroscopo').value.trim();
            const fecha = document.getElementById('fechaHoroscopo').value;
            const loadingElement = document.getElementById('horoscopoLoading');
            const resultadoDiv = document.getElementById('horoscopo-resultado');
            
            if (!nombre || !fecha) {
                alert("Por favor, introduce tu Nombre y Fecha de Nacimiento.");
                return;
            }
            
            loadingElement.style.display = 'block';
            resultadoDiv.style.display = 'none';
            
            const signo = calcularSigno(fecha);
            const hoy = new Date().toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' });
            
            const systemPrompt = `Eres un astr√≥logo personal que ofrece una predicci√≥n concisa y alentadora. Responde directamente con el saludo y la predicci√≥n para ${signo} en un tono m√≠stico.`;
            const userQuery = `Hola ${nombre}, mi signo es ${signo}. Dame el Hor√≥scopo diario gratuito para hoy, ${hoy}. M√°ximo 25 palabras.`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };
            
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) throw new Error(`API error: ${response.statusText}`);
                
                const result = await response.json();
                const prediccion = result.candidates?.[0]?.content?.parts?.[0]?.text || "No se pudo generar la predicci√≥n m√≠stica.";
                
                document.getElementById('signoResult').textContent = signo;
                document.getElementById('prediccionResult').textContent = prediccion;
                
                resultadoDiv.style.display = 'block';
            } catch (error) {
                console.error("Error al obtener Hor√≥scopo:", error);
                document.getElementById('prediccionResult').textContent = 'Error: No se pudo conectar con el Cosmos.';
                resultadoDiv.style.display = 'block';
            } finally {
                loadingElement.style.display = 'none';
            }
        }
        
        function prepararTarotGratis() {
            const nombre = localStorage.getItem('usuarioNombre');
            
            // 1. Mostrar la alerta pidiendo la pregunta (NO requiere usuario conectado)
            if (window.confirm("¬°Concentra tu energ√≠a! Piensa una pregunta clave. Despu√©s de aceptar, revelaremos tu carta.")) {
                // 2. Si acepta, muestra la carta aleatoria
                sacarCartaGratis(nombre || "Usuario"); 
            }
        }

        function sacarCartaGratis(nombre) {
            const randomIndex = Math.floor(Math.random() * ARCANOS_MAYORES.length);
            const carta = ARCANOS_MAYORES[randomIndex];
            
            // Usamos alert para mostrar el resultado
            alert(`¬°CARTA GRATUITA REVELADA!\n\nArcano: ${carta.nombre}\nLectura: ${carta.lectura}\n\n‚ú® Esta fue tu gu√≠a personal. ¬°La pr√≥xima lectura (0.99‚Ç¨) est√° en SERVICIOS!`);
        }


        // --- 3. L√ìGICA DE CALENDARIO VISUAL ---
        
        function renderCalendarGrid(month, year) {
            const grid = document.getElementById('calendarGrid');
            const header = document.getElementById('currentMonthYear');
            const date = new Date(year, month, 1);
            const today = new Date();
            grid.innerHTML = '';
            
            const monthNames = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];
            const dayNames = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];

            header.textContent = `${monthNames[month]} ${year}`;

            dayNames.forEach(day => {
                const dayName = document.createElement('div');
                dayName.classList.add('day-name');
                dayName.textContent = day;
                grid.appendChild(dayName);
            });

            const startingDay = date.getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            for (let i = 0; i < startingDay; i++) {
                grid.appendChild(document.createElement('div'));
            }

            for (let i = 1; i <= daysInMonth; i++) {
                const dayNumber = document.createElement('div');
                dayNumber.classList.add('day-number');
                dayNumber.textContent = i;
                
                if (i === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
                    dayNumber.classList.add('current-day');
                }

                grid.appendChild(dayNumber);
            }
        }

        function changeMonth(step) {
            currentMonth += step;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            } else if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            renderCalendarGrid(currentMonth, currentYear);
        }

        // --- 4. L√ìGICA DE SESI√ìN Y MODAL ---
        
        function openModal(modalId, serviceId) {
            localStorage.setItem('currentServiceId', serviceId); 
            document.getElementById(modalId).style.display = 'block';
            if (modalId === 'accessModal') {
                document.getElementById('modalError').textContent = '';
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Funci√≥n para abrir el modal de sue√±os
        function openDreamModal() {
            document.getElementById('dreamText').value = '';
            openModal('dreamModal', 'DREAM_LOG'); 
        }

        function saveDream() {
            const dreamText = document.getElementById('dreamText').value.trim();
            if (dreamText === '') {
                alert('Escribe tu sue√±o antes de guardarlo.');
                return;
            }
            // Esto solo lo guarda en el navegador del cliente.
            const dreams = JSON.parse(localStorage.getItem('dreams') || '[]');
            dreams.push({ date: new Date().toISOString().split('T')[0], text: dreamText });
            localStorage.setItem('dreams', JSON.stringify(dreams));
            alert('¬°Sue√±o guardado! Revisa la consola (F12) para verlo.');
            closeModal('dreamModal');
        }

        function sendDreamForInterpretation() {
            const dreamText = document.getElementById('dreamText').value.trim();
            if (dreamText === '') {
                alert('Debes escribir un sue√±o para la interpretaci√≥n.');
                return;
            }

            // Codificar el mensaje de WhatsApp con el sue√±o y la solicitud de voluntad
            const encodedDream = encodeURIComponent(dreamText);
            const whatsappMessage = `Hola, quiero una interpretaci√≥n de mi sue√±o por voluntad. Mi sue√±o es: ${encodedDream}`;
            
            // Redirigir a PayPal primero (pago por voluntad)
            const paypalLink = 'https://www.paypal.com/paypalme/heramancias'; 
            window.open(paypalLink, '_blank');
            
            // Redirigir a WhatsApp
            setTimeout(() => {
                window.open(`https://wa.me/34666636723?text=${whatsappMessage}`, '_blank');
            }, 1000); // Dar tiempo para que PayPal abra primero

            closeModal('dreamModal');
            alert('Abre PayPal para realizar tu pago por voluntad y luego WhatsApp para enviarme el sue√±o.');
        }


        function isValidEmail(email) {
            const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }

        function calcularSigno(fecha) {
            const date = new Date(fecha);
            const mes = date.getMonth() + 1;
            const dia = date.getDate();

            if ((mes === 3 && dia >= 21) || (mes === 4 && dia <= 19)) return 'Aries ‚ôà';
            if ((mes === 4 && dia >= 20) || (mes === 5 && dia <= 20)) return 'Tauro ‚ôâ';
            if ((mes === 5 && dia >= 21) || (mes === 6 && dia <= 20)) return 'G√©minis ‚ôä';
            if ((mes === 6 && dia >= 21) || (mes === 7 && dia <= 22)) return 'C√°ncer ‚ôã';
            if ((mes === 7 && dia >= 23) || (mes === 8 && dia <= 22)) return 'Leo ‚ôå';
            if ((mes === 8 && dia >= 23) || (mes === 9 && dia <= 22)) return 'Virgo ‚ôç';
            if ((mes === 9 && dia >= 23) || (mes === 10 && dia <= 22)) return 'Libra ‚ôé';
            if ((mes === 10 && dia >= 23) || (mes === 11 && dia <= 21)) return 'Escorpio ‚ôè';
            if ((mes === 11 && dia >= 22) || (mes === 12 && dia <= 21)) return 'Sagitario ‚ôê';
            if ((mes === 12 && dia >= 22) || (mes === 1 && dia <= 19)) return 'Capricornio ‚ôë';
            if ((mes === 1 && dia >= 20) || (mes === 2 && dia <= 18)) return 'Acuario ‚ôí';
            if ((mes === 2 && dia >= 19) || (mes === 3 && dia <= 20)) return 'Piscis ‚ôì';
            return 'No Definido';
        }

        function submitModalData() {
            const nombre = document.getElementById('modalNombre').value.trim();
            const fecha = document.getElementById('modalFechaNacimiento').value;
            const email = document.getElementById('modalCorreoElectronico').value.trim();
            const modalError = document.getElementById('modalError');
            const serviceId = localStorage.getItem('currentServiceId');

            if (!nombre || !fecha || !email) {
                modalError.textContent = "Rellena todos los campos.";
                return;
            }
            if (!isValidEmail(email)) {
                modalError.textContent = "Introduce un correo electr√≥nico v√°lido.";
                return;
            }

            const signo = calcularSigno(fecha);

            localStorage.setItem('usuarioNombre', nombre);
            localStorage.setItem('usuarioSigno', signo);
            
            // L√≥gica de Redirecci√≥n (PAGO de suscripci√≥n)
            alert(`¬°Datos registrados! Tu signo es ${signo}. Ser√°s redirigido a PayPal para pagar el servicio: ${serviceId}.`);
            window.open('https://www.paypal.com/paypalme/heramancias', '_blank');
            closeModal('accessModal');
        }

        // Funci√≥n para abrir el modal de Tarot (Bot√≥n TAROT)
        function openTarotModal() {
            document.getElementById('tarotModal').style.display = 'block';
        }

        function processTarotReading() {
            const nombre = document.getElementById('tarotNombre').value.trim();
            const fecha = document.getElementById('tarotFechaNacimiento').value;
            const email = document.getElementById('tarotCorreoElectronico').value.trim();
            const pregunta = document.getElementById('tarotPregunta').value.trim();
            const modalError = document.getElementById('tarotModalError');

            if (!nombre || !fecha || !email || !pregunta) {
                modalError.textContent = "Rellena todos los campos y tu pregunta.";
                return;
            }
            if (!isValidEmail(email)) {
                modalError.textContent = "Introduce un correo electr√≥nico v√°lido.";
                return;
            }

            // Simulaci√≥n de la Carta 1 (Gu√≠a Gratuita)
            const randomIndex = Math.floor(Math.random() * ARCANOS_MAYORES.length);
            const carta1 = ARCANOS_MAYORES[randomIndex];

            const modalContent = document.getElementById('tarotModalContent');

            // 1. Mostrar la Carta 1 y el Muro de Pago
            modalContent.innerHTML = `
                <span class="close" onclick="closeModal('tarotModal')">&times;</span>
                <h2 style="text-align: center;">‚ú® TU GU√çA GRATUITA REVELADA ‚ú®</h2>
                
                <div id="tarotResultado">
                    <h4>CARTA 1: ${carta1.nombre}</h4>
                    <p style="color: #333;">${carta1.lectura}</p>
                </div>

                <hr style="border: 0; height: 1px; background-color: #ffb6c1; margin: 15px 0;">

                <h3 style="color: #ff69b4; text-align: center;">Lectura Completa (3 Cartas)</h3>
                <p style="color: #666; font-weight: bold; text-align: center;">Precio: 3.00‚Ç¨</p>
                <p style="color: #666; font-size: 0.9em; text-align: center;">Haz el pago y te enviar√© las Cartas 2 y 3 con la interpretaci√≥n completa de tu pregunta.</p>

                <button class="action-button tarot" onclick="payAndContactTarot('${nombre}', '${email}', '${pregunta}')">
                    1. PAGAR 3.00‚Ç¨ AHORA (PayPal)
                </button>
                <button class="action-button" style="background-color: #25d366; color: white; margin-top: 5px;" onclick="alert('Completa el pago primero para enviar el mensaje.')">
                    2. ENVIAR DATOS POR WHATSAPP
                </button>
            `;
        }
        
        function payAndContactTarot(nombre, email, pregunta) {
            // 1. Redirigir a PayPal (PAGO)
            window.open('https://www.paypal.com/paypalme/heramancias', '_blank');

            // 2. Redirigir a WhatsApp con los datos
            const whatsappMessage = `Hola, he realizado el pago de 3.00‚Ç¨ por la Lectura de 3 Cartas. Mis datos son:\n- Nombre: ${nombre}\n- Correo: ${email}\n- Pregunta: ${pregunta}`;
            
            setTimeout(() => {
                window.open(`https://wa.me/34666636723?text=${encodeURIComponent(whatsappMessage)}`, '_blank');
            }, 1500); // Peque√±a espera para que PayPal abra primero

            closeModal('tarotModal');
        }


        // --- L√ìGICA DE AFIRMACIONES ---
        function resetAfirmacionCard() {
            const cardContainer = document.getElementById('cardContainer');
            document.getElementById('sacarCartaBtn').style.display = 'block'; // Muestra el bot√≥n de sacar carta
            document.getElementById('afirmacionPaywall').style.display = 'none'; // Oculta el muro de pago
            cardContainer.innerHTML = `
                <p style="font-weight: bold; color: #ff69b4;">Toca el bot√≥n para recibir tu mensaje.</p>
                <p style="font-size: 0.9em; color: #666;">Afirmaciones positivas y gu√≠a visual de los Susurros del Dios Ganesha.</p>`;
        }

        function sacarCartaAfirmacion(button) {
            const cardContainer = document.getElementById('cardContainer');
            const randomIndex = Math.floor(Math.random() * AFIRMACIONES_ORACULO.length);
            const carta = AFIRMACIONES_ORACULO[randomIndex];
            
            // Asigna el color del borde de la tarjeta
            cardContainer.style.borderColor = carta.color;

            // Define el dibujo (usando un emoji como s√≠mbolo de Ganesha temporal)
            const ganeshaIcon = 'üêò';
            const drawing = `<div class="afirmacion-figure" style="border-color: ${carta.color}; color: ${carta.color};">${ganeshaIcon}</div>`;


            cardContainer.innerHTML = `
                ${drawing}
                <p style="font-size: 1.3em; font-weight: bold; color: ${carta.color};">CONCEPTO: ${carta.concepto}</p>
                <p class="afirmacion-text">${carta.mensaje}</p>
                <p style="font-size: 0.8em; color: #666;">*Guarda esta afirmaci√≥n en tu coraz√≥n.</p>
            `;
            
            // L√≥gica del Muro de Pago: Ocultar el bot√≥n de carta y mostrar el muro
            button.style.display = 'none';
            document.getElementById('afirmacionPaywall').style.display = 'block';
        }

        // --- 5. L√ìGICA DE INICIO Y CALENDARIO ---
        
        function cargarApp() {
            actualizarFaseLunar(); 
            renderNavbar();
            renderCalendarGrid(currentMonth, currentYear);
        }

        window.onload = cargarApp;
    </script>
</body>
</html>
